{% extends "base.html" %}
{% block title %}Change Password Â· Secure Health Application{% endblock %}

{% block content %}
  <!-- I'm creating the page that lets a logged-in user change their password -->
  <h1>Change your password</h1>

  <!-- I'm using POST method for security so password fields are not exposed in the URL -->
  <form method="post" style="max-width:480px;">

    <!-- I'm including the CSRF token for protection against cross-site request forgery -->
    {{ form.hidden_tag() }}

    <!-- I'm displaying the current password field so the user confirms their identity -->
    <div style="margin:10px 0;">
      <label>{{ form.current_password.label }}</label><br>
      {{ form.current_password(size=32) }}
      {% for err in form.current_password.errors %}
        <div style="color:#b00;">{{ err }}</div> <!-- I'm showing error message if user leaves this blank or incorrect -->
      {% endfor %}
    </div>

    <!-- I'm showing a new password field where the user types their new password -->
    <div style="margin:10px 0;">
      <label>{{ form.new_password.label }}</label><br>
      {{ form.new_password(size=32) }}
      {% for err in form.new_password.errors %}
        <div style="color:#b00;">{{ err }}</div> <!-- Error messages will appear in red -->
      {% endfor %}
    </div>

    <!-- I'm adding a confirm password field to ensure they retype it correctly -->
    <div style="margin:10px 0;">
      <label>{{ form.confirm_password.label }}</label><br>
      {{ form.confirm_password(size=32) }}
      {% for err in form.confirm_password.errors %}
        <div style="color:#b00;">{{ err }}</div>
      {% endfor %}
    </div>

    <!-- I'm displaying the submit button that triggers password change -->
    {{ form.submit() }}
  </form>
{% endblock %}